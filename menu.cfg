[menu __main __octoprint]
type: disabled

[delayed_gcode shutdown_machine]
gcode:
     {action_call_remote_method("shutdown_machine")}
initial_duration: 0.0

[menu __main __setup __restart __host_shutdown]
type: command
enable: {printer.idle_timeout.state != "Printing"}
name: Shutdown host
gcode:
    M117 Shutdown
    M118 Shutdown
    { menu.exit() }    
    UPDATE_DELAYED_GCODE ID=shutdown_machine DURATION=1

[menu __main __temp __preheat_pla]
type: disabled

[menu __main __temp __preheat_abs]
type: disabled

[menu __main __temp __cooldown __all]
type: command
name: Cooldown all
gcode: TURN_OFF_HEATERS

[gcode_macro PID_HOTEND]
description: Run hotend PID calibration test
gcode:
    {% set TARGET = params.TARGET | default(250) | float %}
    PID_CALIBRATE HEATER=extruder TARGET={TARGET} WRITE_FILE=1

[gcode_macro PID_BED]
description: Run heater bed PID calibration test
gcode:
    {% set TARGET = params.TARGET | default(100) | float %}
    PID_CALIBRATE HEATER=heater_bed TARGET={TARGET} WRITE_FILE=1

[menu __main __setup __tuning __hotend_pid_tuning]
type: command
enable: {(not printer.idle_timeout.state == "Printing") and ('extruder' in printer)}
name: Tune Hotend PID
gcode: PID_HOTEND

[menu __main __setup __tuning __hotbed_pid_tuning]
type: command
enable: {(not printer.idle_timeout.state == "Printing") and ('heater_bed' in printer)}
name: Tune Heatbed PID
gcode: PID_BED